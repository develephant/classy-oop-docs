



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://develephant.github.io/classy-plugin/tutorial/discussion/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../img/favicon.ico">
      <meta name="generator" content="mkdocs-0.17.2, mkdocs-material-2.6.0">
    
    
      
        <title>Discussion - Classy OOP</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.aa3de92b.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.792431c1.css">
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
      <link href="https://use.fontawesome.com/releases/v5.0.6/css/all.css" rel="stylesheet" >
    
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue" data-md-color-accent="amber">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <a href="#getterssetters" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://develephant.github.io/classy-plugin/" title="Classy OOP" class="md-header-nav__button md-logo">
          
            <img src="../../img/rnd-dev.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Classy OOP
              </span>
              <span class="md-header-nav__topic">
                Discussion
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <img src="../../img/rnd-dev.png" width="24" height="24">
      
    </span>
    Classy OOP
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../setup/" title="Setup" class="md-nav__link">
      Setup
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../classy/" title="API" class="md-nav__link">
      API
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Usage
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Usage
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../usage/class/" title="Classes" class="md-nav__link">
      Classes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../usage/subclass/" title="Subclasses" class="md-nav__link">
      Subclasses
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../usage/instance/" title="Instances" class="md-nav__link">
      Instances
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" checked>
    
    <label class="md-nav__link" for="nav-5">
      Tutorial
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Tutorial
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../character/" title="Characters" class="md-nav__link">
      Characters
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../weapon/" title="Weapons" class="md-nav__link">
      Weapons
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Discussion
      </label>
    
    <a href="./" title="Discussion" class="md-nav__link md-nav__link--active">
      Discussion
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#getterssetters" title="Getters/Setters" class="md-nav__link">
    Getters/Setters
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#subclass-notes" title="Subclass Notes" class="md-nav__link">
    Subclass Notes
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../battle/" title="Mock Battle" class="md-nav__link">
      Mock Battle
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../demo/" title="Demo" class="md-nav__link">
      Demo
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../about/" title="About" class="md-nav__link">
      About
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#getterssetters" title="Getters/Setters" class="md-nav__link">
    Getters/Setters
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#subclass-notes" title="Subclass Notes" class="md-nav__link">
    Subclass Notes
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>Discussion</h1>
                
                <p>Now that all the classes have been created, let's look at a few important key points in the classes and subclasses.</p>
<h2 id="getterssetters">Getters/Setters</h2>
<p>You should notice that for every property there is at least a <strong>get&lt;Prop></strong> method and some properties also have a <strong>set&lt;Prop></strong> method.</p>
<p>This is a good practice as it allows one to add additional needs in the future when manipulating a property. You should never directly set a property, but always use its "getter" or "setter" for better control.</p>
<p>For example, in our Mage class:</p>
<div class="codehilite"><pre><span></span><span class="p">...</span>

<span class="kr">function</span> <span class="nc">Mage</span><span class="p">:</span><span class="nf">constructor</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">isType</span><span class="p">,</span> <span class="n">health</span><span class="p">,</span> <span class="n">maxHealth</span><span class="p">,</span> <span class="n">weapon</span><span class="p">,</span> <span class="n">mana</span><span class="p">,</span> <span class="n">maxMana</span><span class="p">)</span>
  <span class="n">Mage</span><span class="p">.</span><span class="n">super</span><span class="p">.</span><span class="n">constructor</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">isType</span><span class="p">,</span> <span class="n">health</span><span class="p">,</span> <span class="n">maxHealth</span><span class="p">,</span> <span class="n">weapon</span><span class="p">)</span>

  <span class="n">self</span><span class="p">.</span><span class="n">mana</span> <span class="o">=</span> <span class="n">mana</span>
  <span class="n">self</span><span class="p">.</span><span class="n">maxMana</span> <span class="o">=</span> <span class="n">maxMana</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">Mage</span><span class="p">:</span><span class="nf">setMana</span><span class="p">(</span><span class="n">amount</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">mana</span> <span class="o">=</span> <span class="n">amount</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">Mage</span><span class="p">:</span><span class="nf">getMana</span><span class="p">()</span>
  <span class="kr">return</span> <span class="n">self</span><span class="p">.</span><span class="n">mana</span>
<span class="kr">end</span>

<span class="p">...</span>
</pre></div>


<p>We have a <code>mana</code> property, but we would always use the <code>getMana</code> and <code>setMana</code> methods to manipulate that property. You would never want to to do <code>self.mana = val</code> or <code>mana = self.mana</code> in any of your methods.</p>
<p>To refill our mana we use a seperate method called <code>refillMana</code>:</p>
<div class="codehilite"><pre><span></span><span class="p">...</span>

<span class="kr">function</span> <span class="nc">Mage</span><span class="p">:</span><span class="nf">refillMana</span><span class="p">(</span><span class="n">amount</span><span class="p">)</span>
  <span class="n">amount</span> <span class="o">=</span> <span class="n">amount</span> <span class="ow">or</span> <span class="n">self</span><span class="p">:</span><span class="n">getMaxMana</span><span class="p">()</span>
  <span class="n">amount</span> <span class="o">=</span> <span class="n">self</span><span class="p">:</span><span class="n">getMana</span><span class="p">()</span> <span class="o">+</span> <span class="n">amount</span>
  <span class="n">self</span><span class="p">:</span><span class="n">setMana</span><span class="p">(</span><span class="nb">math.min</span><span class="p">(</span><span class="n">amount</span><span class="p">,</span> <span class="n">self</span><span class="p">:</span><span class="n">getMaxMana</span><span class="p">()))</span>
<span class="kr">end</span>

<span class="p">...</span>
</pre></div>


<p>You should notice that we never call the property directly, but use the "getter" and "setter" methods instead. </p>
<p>In the example code above we "clamp" the <code>mana</code> value to the <code>maxMana</code> (using <code>math.min</code>). It's better to do this in a seperate method so we don't pollute the setting of the raw <code>mana</code> property.</p>
<p>The <code>setMana</code> method itself will take any value:</p>
<div class="codehilite"><pre><span></span><span class="p">...</span>

<span class="kr">function</span> <span class="nc">Mage</span><span class="p">:</span><span class="nf">setMana</span><span class="p">(</span><span class="n">amount</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">mana</span> <span class="o">=</span> <span class="n">amount</span>
<span class="kr">end</span>

<span class="p">...</span>
</pre></div>


<p>This allows us to override the <code>maxMana</code> if we want to with a "buff" or potion. For example, let's assume we have some "buff" functionality built into our Mage class that adds additional bonus mana when active, we can then easily adjust our <code>refillMana</code> method:</p>
<div class="codehilite"><pre><span></span><span class="p">...</span>

<span class="kr">function</span> <span class="nc">Mage</span><span class="p">:</span><span class="nf">refillMana</span><span class="p">(</span><span class="n">amount</span><span class="p">)</span>
  <span class="n">amount</span> <span class="o">=</span> <span class="n">amount</span> <span class="ow">or</span> <span class="n">self</span><span class="p">:</span><span class="n">getMaxMana</span><span class="p">()</span>
  <span class="n">amount</span> <span class="o">=</span> <span class="n">self</span><span class="p">:</span><span class="n">getMana</span><span class="p">()</span> <span class="o">+</span> <span class="n">amount</span>

  <span class="c1">--do we have a buff?</span>
  <span class="kr">if</span> <span class="n">self</span><span class="p">:</span><span class="n">hasActiveBuff</span><span class="p">()</span> <span class="kr">then</span>
    <span class="n">amount</span> <span class="o">=</span> <span class="n">amount</span> <span class="o">+</span> <span class="n">self</span><span class="p">:</span><span class="n">getBuffValue</span><span class="p">()</span>
    <span class="n">self</span><span class="p">:</span><span class="n">setMana</span><span class="p">(</span><span class="n">amount</span><span class="p">)</span> <span class="c1">--no clamping here</span>
  <span class="kr">else</span>
    <span class="n">self</span><span class="p">:</span><span class="n">setMana</span><span class="p">(</span><span class="nb">math.min</span><span class="p">(</span><span class="n">amount</span><span class="p">,</span> <span class="n">self</span><span class="p">:</span><span class="n">getMaxMana</span><span class="p">()))</span>
  <span class="kr">end</span>
<span class="kr">end</span>

<span class="p">...</span>
</pre></div>


<p>You could put the <code>refillMana</code> functionality directly in the <code>setMana</code> method, but it is better to abstract the functionality out, keeping the property "getter" and "setter" clean.</p>
<h2 id="subclass-notes">Subclass Notes</h2>
<p>All subclass are created using the <code>extends</code> method on the class or subclass we want to extend. We do not use <code>Classy.create</code>, but we need to pull in the base class using <code>require</code> so that we can subclass it.</p>
<div class="codehilite"><pre><span></span><span class="p">...</span>

<span class="c1">--The base class (or subclass)</span>
<span class="kd">local</span> <span class="n">Character</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s2">&quot;classes.Character&quot;</span><span class="p">)</span>

<span class="c1">--Create a subclass by &quot;extending&quot;</span>
<span class="kd">local</span> <span class="n">Warrior</span> <span class="o">=</span> <span class="n">Character</span><span class="p">:</span><span class="n">extends</span><span class="p">(</span><span class="s2">&quot;Warrior&quot;</span><span class="p">)</span>

<span class="p">...</span>
</pre></div>


<p>When creating a subclass, we need to make sure to pass up the required base class arguments by using the <code>constructor</code> function. This done using the <strong>super</strong> property:</p>
<div class="codehilite"><pre><span></span><span class="p">...</span>

<span class="kr">function</span> <span class="nc">Warrior</span><span class="p">:</span><span class="nf">constructor</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">isType</span><span class="p">,</span> <span class="n">health</span><span class="p">,</span> <span class="n">maxHealth</span><span class="p">,</span> <span class="n">weapon</span><span class="p">)</span>

  <span class="c1">--Pass the arguments up the hierarchy using &quot;super&quot;</span>
  <span class="n">Warrior</span><span class="p">.</span><span class="n">super</span><span class="p">.</span><span class="n">constructor</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">isType</span><span class="p">,</span> <span class="n">health</span><span class="p">,</span> <span class="n">maxHealth</span><span class="p">,</span> <span class="n">weapon</span><span class="p">)</span>
<span class="kr">end</span>

<span class="p">...</span>
</pre></div>


<p><span class="far fa-bell"></span> <strong>Pay attention to the signature of the <code>super.constructor</code> function. You need to make sure you pass a reference of <code>self</code> to it, along with any additional arguments, and use only dot (<strong>.</strong>) syntax:</strong></p>
<div class="codehilite"><pre><span></span><span class="o">&lt;</span><span class="n">Class</span><span class="o">&gt;</span><span class="p">.</span><span class="n">super</span><span class="p">.</span><span class="n">constructor</span><span class="p">(</span><span class="n">self</span><span class="p">[,</span> <span class="n">args</span><span class="p">])</span>
</pre></div>


<p><em>This is very important to remember, or your subclasses will not work as expected.</em>.</p>
<p>In the case of subclasses that have their own specific properties, we only need to pass the ones the base class needs, and we then store the others on the subclass itself:</p>
<div class="codehilite"><pre><span></span><span class="p">...</span>

<span class="kr">function</span> <span class="nc">Mage</span><span class="p">:</span><span class="nf">constructor</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">isType</span><span class="p">,</span> <span class="n">health</span><span class="p">,</span> <span class="n">maxHealth</span><span class="p">,</span> <span class="n">weapon</span><span class="p">,</span> <span class="n">mana</span><span class="p">,</span> <span class="n">maxMana</span><span class="p">)</span>

  <span class="c1">--Pass the base class arguments up the hierarchy using &quot;super&quot;</span>
  <span class="n">Mage</span><span class="p">.</span><span class="n">super</span><span class="p">.</span><span class="n">constructor</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">isType</span><span class="p">,</span> <span class="n">health</span><span class="p">,</span> <span class="n">maxHealth</span><span class="p">,</span> <span class="n">weapon</span><span class="p">)</span>

  <span class="c1">--Store properties specific to this subclass</span>
  <span class="n">self</span><span class="p">.</span><span class="n">mana</span> <span class="o">=</span> <span class="n">mana</span>
  <span class="n">self</span><span class="p">.</span><span class="n">maxMana</span> <span class="o">=</span> <span class="n">maxMana</span>
<span class="kr">end</span>

<span class="p">...</span>
</pre></div>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../weapon/" title="Weapons" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Weapons
              </span>
            </div>
          </a>
        
        
          <a href="../battle/" title="Mock Battle" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Mock Battle
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            &copy;2018 C. Byerley (develephant) | <i class="fas fa-flask fa-sm"></i> v1.0.0
          </div>
        
        powered by
        <a href="http://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    
      <a href="https://forums.coronalabs.com/forum/654-corona-community-plugins/" class="md-footer-social__link"><i class="far fa-life-ring"></i></a>
    
      <a href="https://twitter.com/develephant" class="md-footer-social__link"><i class="fab fa-twitter"></i></a>
    
      <a href="https://develephant.com" class="md-footer-social__link"><i class="fas fa-globe"></i></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.62cfdabc.js"></script>
      
      <script>app.initialize({version:"0.17.2",url:{base:"../.."}})</script>
      
    
    
      
    
  </body>
</html>